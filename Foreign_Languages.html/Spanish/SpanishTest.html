<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spanish Test System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; min-height: 100vh; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .hidden { display: none !important; }
        h1 { color: #2d3748; font-size: 2.5em; text-align: center; margin-bottom: 10px; }
        h2 { color: #4a5568; font-size: 1.8em; margin-bottom: 20px; }
        .subtitle { color: #718096; text-align: center; font-size: 1.2em; margin-bottom: 30px; }
        .info-box { background: #fff5f5; border-radius: 12px; padding: 25px; margin-bottom: 25px; }
        .info-box h3 { color: #c53030; margin-bottom: 15px; }
        .info-box ul { list-style: none; color: #2d3748; }
        .info-box li { margin: 10px 0; padding-left: 25px; position: relative; }
        .info-box li::before { content: "‚Ä¢"; color: #f56565; font-weight: bold; position: absolute; left: 0; }
        .btn { width: 100%; padding: 18px; border: none; border-radius: 12px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.3s; margin: 10px 0; }
        .btn-primary { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(245, 87, 108, 0.4); }
        .btn-success { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); color: white; }
        .btn:disabled { background: #cbd5e0; cursor: not-allowed; }
        .progress-bar { width: 100%; height: 12px; background: #e2e8f0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%); transition: width 0.3s; }
        .progress-info { display: flex; justify-content: space-between; color: #718096; font-size: 0.9em; }
        .question-box { background: #fff5f5; border-radius: 12px; padding: 30px; margin: 20px 0; }
        .question-text { color: #2d3748; font-size: 1.3em; font-weight: 500; }
        input[type="text"] { width: 100%; padding: 18px; border: 2px solid #cbd5e0; border-radius: 12px; font-size: 1.1em; margin: 15px 0; }
        input[type="text"]:focus { outline: none; border-color: #f5576c; }
        .feedback { border-radius: 12px; padding: 25px; margin: 20px 0; display: flex; align-items: center; }
        .feedback-correct { background: #c6f6d5; color: #22543d; }
        .feedback-wrong { background: #fed7d7; color: #742a2a; }
        .feedback-icon { font-size: 2em; margin-right: 15px; }
        .feedback-text { font-size: 1.2em; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 25px 0; }
        .stat-card { background: white; border-radius: 12px; padding: 25px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .stat-label { color: #718096; font-size: 0.9em; margin-bottom: 10px; }
        .stat-value { font-size: 2.5em; font-weight: bold; }
        .result-card { background: linear-gradient(135deg, #fff5f5 0%, #fef5e7 100%); border-radius: 15px; padding: 30px; text-align: center; margin: 25px 0; }
        .score-big { font-size: 4em; font-weight: bold; margin: 15px 0; }
        .icon { width: 80px; height: 80px; margin: 20px auto; background: linear-gradient(135deg, #fbd38d 0%, #ed8936 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5em; }
        .overall-stats { background: #f7fafc; border-radius: 12px; padding: 15px; text-align: center; margin-top: 20px; color: #718096; font-size: 0.9em; }
    </style>
</head>
<body>
    <div id="homeScreen" class="container">
        <h1>üá™üá∏ Spanish Test System</h1>
        <p class="subtitle">Comprehensive Learning + Various Question Types + General Review</p>
        <div class="info-box">
            <h3>How it works:</h3>
            <ul><li>Complete all 26 lessons in order</li><li>Each lesson has multiple question types</li><li>General review after each lesson</li><li>Track your progress across all lessons</li></ul>
        </div>
        <button class="btn btn-primary" onclick="startFirstLesson()">Start Test - Begin with Lesson 1</button>
    </div>
    <div id="testScreen" class="container hidden">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h2 id="lessonTitle"></h2><span id="lessonProgress" style="color: #718096;"></span></div>
        <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
        <div class="progress-info"><span id="questionNumber"></span><span id="currentScore"></span></div>
        <div class="question-box"><div class="question-text" id="questionText"></div></div>
        <div id="answerSection">
            <input type="text" id="answerInput" placeholder="Type your answer..." onkeypress="handleEnter(event)">
            <button class="btn btn-primary" onclick="checkAnswer()">Submit Answer</button>
        </div>
        <div id="feedbackSection" class="hidden">
            <div id="feedbackBox" class="feedback"><div class="feedback-icon" id="feedbackIcon"></div><div><div class="feedback-text" id="feedbackText"></div><div id="correctAnswer" style="margin-top: 10px;"></div></div></div>
            <button class="btn btn-success" onclick="nextQuestion()">Next Question ‚Üí</button>
        </div>
        <div class="overall-stats"><span id="overallProgress"></span></div>
    </div>
    <div id="lessonCompleteScreen" class="container hidden">
        <div class="icon">üèÜ</div><h1>Main Questions Complete!</h1>
        <div class="result-card"><div class="stat-label">Score</div><div class="score-big" id="mainScore"></div><div id="mainPercentage" style="font-size: 2em; font-weight: bold; margin-top: 10px;"></div></div>
        <p style="text-align: center; font-size: 1.2em; color: #4a5568; margin: 25px 0;">Now it's time for the General Review!</p>
        <button class="btn btn-primary" onclick="startReview()">Start General Review</button>
    </div>
    <div id="reviewCompleteScreen" class="container hidden">
        <div class="icon">üéâ</div><h1>Lesson Complete!</h1><h2 id="completedLessonName" style="text-align: center; color: #718096;"></h2>
        <div class="result-card">
            <div class="stats-grid"><div class="stat-card"><div class="stat-label">Main Questions</div><div class="stat-value" id="mainQScore" style="color: #f093fb;"></div></div><div class="stat-card"><div class="stat-label">General Review</div><div class="stat-value" id="reviewScore" style="color: #f5576c;"></div></div></div>
            <div class="stat-card" style="margin-top: 20px;"><div class="stat-label">Total Score</div><div class="stat-value" id="totalScore"></div><div id="totalPercentage" style="font-size: 2em; font-weight: bold; margin-top: 10px;"></div><div id="performanceMessage" style="font-size: 1.2em; font-weight: 600; margin-top: 10px;"></div></div>
        </div>
        <button class="btn btn-primary" onclick="continueToNext()"><span id="continueButtonText"></span> ‚Üí</button>
        <div style="text-align: center; color: #718096; margin-top: 15px;"><span id="lessonsCompleted"></span></div>
    </div>
    <div id="finalScreen" class="container hidden">
        <div style="font-size: 4em; margin-bottom: 20px; text-align: center;">üéä</div><h1 style="text-align: center;">ALL LESSONS COMPLETED!</h1><h2 style="text-align: center; color: #f5576c;">FINAL RESULTS</h2>
        <div class="result-card">
            <div style="margin-bottom: 30px;"><div class="stat-label">Total Lessons</div><div style="font-size: 3em; font-weight: bold;" id="totalLessons"></div></div>
            <div style="margin-bottom: 30px;"><div class="stat-label">Total Score</div><div style="font-size: 4em; font-weight: bold; color: #f5576c;" id="finalScore"></div></div>
            <div class="stat-card"><div class="stat-label">Success Rate</div><div class="score-big" id="finalPercentage"></div><div id="finalMessage" style="font-size: 1.5em; font-weight: bold; margin-top: 15px;"></div></div>
        </div>
        <p style="text-align: center; font-size: 1.3em; color: #48bb78; font-weight: 600; margin: 25px 0;">Congratulations!</p>
        <button class="btn btn-primary" onclick="goHome()">üè† Back to Home</button>
    </div>
    <script>
        function normalizeText(text) { return text.toLowerCase().trim().normalize('NFD').replace(/[\u0300-\u036f]/g, ''); }
        const lessonsData = {"Lesson 1 - Numbers 1-10":{count:10,words:[["1","uno"],["2","dos"],["3","tres"],["4","cuatro"],["5","cinco"],["6","seis"],["7","siete"],["8","ocho"],["9","nueve"],["10","diez"]],isNumbers:true},"Lesson 2 - Greetings":{count:18,words:[["Hello","hola"],["How are you?","como estas"],["Nice to meet you","mucho gusto"],["Nice to meet you (alt)","encantado de conocerte"],["See you tomorrow","hasta manana"],["Good morning","buenos dias"],["Good afternoon","buenas tardes"],["Good night","buenas noches"],["What is your name?","cual es su nombre"],["My name is","me llamo"],["Where do you live?","donde vives"],["Where are you from?","de donde eres"],["Nice to see you","encantado de verte"],["Have a nice day","que tengas un buen dia"],["See you later","hasta luego"],["Goodbye","adios"],["Please","por favor"],["Thank you","gracias"]],isNumbers:false},"Lesson 3 - Regular -AR Verbs":{count:75,words:[["to pass","pasar"],["to stay","quedar"],["to speak","hablar"],["to carry","llevar"],["to leave","dejar"],["to call","llamar"],["to take","tomar"],["to treat","tratar"],["to watch","mirar"],["to wait","esperar"],["to enter","entrar"],["to work","trabajar"],["to finish","terminar"],["to need","necesitar"],["to turn out","resultar"],["to change","cambiar"],["to introduce","presentar"],["to create","crear"],["to consider","considerar"],["to end","acabar"],["to win","ganar"],["to form","formar"],["to accept","aceptar"],["to achieve","lograr"],["to ask","preguntar"],["to study","estudiar"],["to help","ayudar"],["to please","gustar"],["to listen","escuchar"],["to raise","levantar"],["to try","intentar"],["to use","usar"],["to forget","olvidar"],["to occupy","ocupar"],["to fix","fijar"],["to buy","comprar"],["to avoid","evitar"],["to interest","interesar"],["to throw","echar"],["to import","importar"],["to observe","observar"],["to imagine","imaginar"],["to develop","desarrollar"],["to point out","se√±alar"],["to prepare","preparar"],["to lack","faltar"],["to accompany","acompa√±ar"],["to desire","desear"],["to teach","ense√±ar"],["to represent","representar"],["to order","mandar"],["to assure","asegurar"],["to kill","matar"],["to guard","guardar"],["to initiate","iniciar"],["to lower","bajar"],["to note","notar"],["to cut","cortar"],["to take advantage","aprovechar"],["to support","apoyar"],["to increase","aumentar"],["to abandon","abandonar"],["to remove","quitar"],["to preserve","conservar"],["to function","funcionar"],["to announce","anunciar"],["to comment","comentar"],["to participate","participar"],["to escape","escapar"],["to pull","tirar"],["to answer","contestar"],["to worry","preocupar"],["to lend","prestar"],["to weigh","pesar"],["to travel","viajar"]],isNumbers:false},"Lesson 4 - Adjectives":{count:35,words:[["Noisy","ruidoso"],["Quiet","silencioso"],["Strong","fuerte"],["Weak","debil"],["Hard","duro"],["Soft","blando"],["More","mas"],["Less","menos"],["Clean","limpio"],["Dirty","sucio"],["Old","viejo"],["New","nuevo"],["Big","grande"],["Small","peque√±o"],["Young","joven"],["Skinny","flaco"],["Fat","gordo"],["Pretty","guapo"],["Ugly","feo"],["Thick","grueso"],["Thin","delgado"],["Rough","aspero"],["Smooth","liso"],["Happy","feliz"],["Sad","triste"],["Angry","enfadado"],["Afraid","asustado"],["Joy","alegria"],["Surprised","sorprendido"],["Calm","tranquilo"],["Bored","aburrido"],["Easy","facil"],["Difficult","dificil"],["Bad","malo"],["Good","bueno"]],isNumbers:false}};
        let state = {lessonNames:Object.keys(lessonsData),currentLessonIndex:0,currentLesson:null,questions:[],currentQ:0,score:{correct:0,total:0},mainQuestionsCorrect:0,isReview:false,allLessonsScore:{correct:0,total:0},completedLessons:0};
        function generateQuestions(words,count,isNumbers){const q=[];if(isNumbers){words.forEach(([e,s])=>{q.push({question:`What is '${e}' in Spanish? (Answer with the WORD)`,answer:s,displayAnswer:s});});words.forEach(([e,s])=>{q.push({question:`What number is '${s}'? (Answer with the NUMBER)`,answer:e,displayAnswer:e});});}else if(count<=20){words.forEach(([e,s])=>q.push({question:`Translate to Spanish: '${e}'`,answer:s,displayAnswer:s}));words.forEach(([e,s])=>q.push({question:`Translate to English: '${s}'`,answer:e,displayAnswer:e}));words.forEach(([e,s])=>{const f=s[0]||"";const b="_".repeat(s.length-1);q.push({question:`'${e}' = '${f}${b}' - Complete the Spanish word`,answer:s,displayAnswer:s});});}else{const t=Math.floor(words.length/3);words.slice(0,t).forEach(([e,s])=>q.push({question:`Translate to Spanish: '${e}'`,answer:s,displayAnswer:s}));words.slice(t,t*2).forEach(([e,s])=>q.push({question:`Translate to English: '${s}'`,answer:e,displayAnswer:e}));words.slice(t*2).forEach(([e,s])=>{const f=s[0]||"";const b="_".repeat(s.length-1);q.push({question:`'${e}' = '${f}${b}'`,answer:s,displayAnswer:s});});}return q.sort(()=>Math.random()-0.5);}
        function generateReview(words,isNumbers){const size=Math.min(20,words.length);const sampled=[...words].sort(()=>Math.random()-0.5).slice(0,size);return sampled.map(([e,s])=>{if(isNumbers){return Math.random()>0.5?{question:`[GENERAL REVIEW] '${e}' in Spanish?`,answer:s,displayAnswer:s}:{question:`[GENERAL REVIEW] What number is '${s}'?`,answer:e,displayAnswer:e};}else{return Math.random()>0.5?{question:`[GENERAL REVIEW] Translate: '${e}'`,answer:s,displayAnswer:s}:{question:`[GENERAL REVIEW] Translate: '${s}'`,answer:e,displayAnswer:e};}});}
        function showScreen(id){document.querySelectorAll('.container').forEach(e=>e.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');}
        function startFirstLesson(){state.currentLessonIndex=0;startLesson(state.lessonNames[0]);}
        function startLesson(name){const l=lessonsData[name];state.currentLesson=name;state.questions=generateQuestions(l.words,l.count,l.isNumbers);state.currentQ=0;state.score={correct:0,total:0};state.mainQuestionsCorrect=0;state.isReview=false;updateTestScreen();showScreen('testScreen');}
        function updateTestScreen(){const q=state.questions[state.currentQ];const p=((state.currentQ+1)/state.questions.length)*100;document.getElementById('lessonTitle').textContent=state.isReview?'üîÑ GENERAL REVIEW':state.currentLesson;document.getElementById('lessonProgress').textContent=`Lesson ${state.completedLessons+1}/${state.lessonNames.length}`;document.getElementById('progressFill').style.width=p+'%';document.getElementById('questionNumber').textContent=`Question ${state.currentQ+1}/${state.questions.length}`;document.getElementById('currentScore').textContent=`Score: ${state.score.correct}/${state.score.total}`;document.getElementById('questionText').textContent=q.question;document.getElementById('overallProgress').textContent=`Overall Progress: ${state.allLessonsScore.correct}/${state.allLessonsScore.total} (${state.allLessonsScore.total>0?Math.round((state.allLessonsScore.correct/state.allLessonsScore.total)*100):0}%)`;document.getElementById('answerInput').value='';document.getElementById('answerInput').focus();document.getElementById('answerSection').classList.remove('hidden');document.getElementById('feedbackSection').classList.add('hidden');}
        function handleEnter(e){if(e.key==='Enter'&&document.getElementById('answerInput').value)checkAnswer();}
        function checkAnswer(){const a=document.getElementById('answerInput').value;if(!a)return;const q=state.questions[state.currentQ];const c=normalizeText(a)===normalizeText(q.answer);state.score.correct+=c?1:0;state.score.total+=1;state.allLessonsScore.correct+=c?1:0;state.allLessonsScore.total+=1;if(!state.isReview&&state.currentQ<state.questions.length){if(c)state.mainQuestionsCorrect++;}document.getElementById('feedbackBox').className=c?'feedback feedback-correct':'feedback feedback-wrong';document.getElementById('feedbackIcon').textContent=c?'‚úì':'‚úó';document.getElementById('feedbackText').textContent=c?'Correct!':'Wrong!';document.getElementById('correctAnswer').innerHTML=c?'':`Correct answer: <strong>${q.displayAnswer}</strong>`;document.getElementById('answerSection').classList.add('hidden');document.getElementById('feedbackSection').classList.remove('hidden');}
        function nextQuestion(){if(state.currentQ<state.questions.length-1){state.currentQ++;updateTestScreen();}else{if(!state.isReview){showLessonComplete();}else{state.completedLessons++;showReviewComplete();}}}
        function showLessonComplete(){const p=(state.mainQuestionsCorrect/state.questions.length)*100;document.getElementById('mainScore').textContent=`${state.mainQuestionsCorrect}/${state.questions.length}`;document.getElementById('mainPercentage').textContent=p.toFixed(1)+'%';showScreen('lessonCompleteScreen');}
        function startReview(){const l=lessonsData[state.currentLesson];state.questions=generateReview(l.words,l.isNumbers);state.currentQ=0;state.isReview=true;updateTestScreen();showScreen('testScreen');}
        function showReviewComplete(){const rc=state.score.correct-state.mainQuestionsCorrect;const tc=state.score.correct;const tq=state.score.total;const p=(tc/tq)*100;document.getElementById('completedLessonName').textContent=state.currentLesson;document.getElementById('mainQScore').textContent=state.mainQuestionsCorrect;document.getElementById('reviewScore').textContent=rc;document.getElementById('totalScore').textContent=`${tc}/${tq}`;document.getElementById('totalPercentage').textContent=p.toFixed(1)+'%';document.getElementById('totalPercentage').style.color=p>=90?'#10b981':p>=70?'#3b82f6':p>=50?'#eab308':'#ef4444';const m=p>=90?'üéâ Excellent!':p>=70?'üëè Very Good!':p>=50?'üëç Good!':'üìö Keep studying!';document.getElementById('performanceMessage').textContent=m;const last=state.currentLessonIndex===state.lessonNames.length-1;document.getElementById('continueButtonText').textContent=last?'View Final Results':`Continue to ${state.lessonNames[state.currentLessonIndex+1]}`;document.getElementById('lessonsCompleted').textContent=`Completed: ${state.completedLessons}/${state.lessonNames.length} lessons`;showScreen('reviewCompleteScreen');}
        function continueToNext(){state.currentLessonIndex++;if(state.currentLessonIndex<state.lessonNames.length){startLesson(state.lessonNames[state.currentLessonIndex]);}else{showFinalResults();}}
        function showFinalResults(){const p=(state.allLessonsScore.correct/state.allLessonsScore.total)*100;document.getElementById('totalLessons').textContent=state.lessonNames.length;document.getElementById('finalScore').textContent=`${state.allLessonsScore.correct}/${state.allLessonsScore.total}`;document.getElementById('finalPercentage').textContent=p.toFixed(1)+'%';document.getElementById('finalPercentage').style.color=p>=90?'#10b981':p>=70?'#3b82f6':p>=50?'#eab308':'#ef4444';const m=p>=90?'üéâüéâüéâ EXCELLENT! You\'re amazing at Spanish! üéâüéâüéâ':p>=70?'üëèüëèüëè VERY GOOD! Great performance! üëèüëèüëè':p>=50?'üëçüëç GOOD! Keep going! üëçüëç':'üìöüìö Keep studying! You can do it! üìöüìö';document.getElementById('finalMessage').textContent=m;showScreen('finalScreen');}
        function goHome(){state={lessonNames:Object.keys(lessonsData),currentLessonIndex:0,currentLesson:null,questions:[],currentQ:0,score:{correct:0,total:0},mainQuestionsCorrect:0,isReview:false,allLessonsScore:{correct:0,total:0},completedLessons:0};showScreen('homeScreen');}
    </script>
</body>
</html>