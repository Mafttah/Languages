<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estonian Test System</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; min-height: 100vh; background: linear-gradient(135deg, #0072ce 0%, #000000 50%, #ffffff 100%); padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 20px; padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); }
        .hidden { display: none !important; }
        h1 { color: #2d3748; font-size: 2.5em; text-align: center; margin-bottom: 10px; }
        h2 { color: #4a5568; font-size: 1.8em; margin-bottom: 20px; }
        .subtitle { color: #718096; text-align: center; font-size: 1.2em; margin-bottom: 30px; }
        .info-box { background: #e6f2ff; border-radius: 12px; padding: 25px; margin-bottom: 25px; }
        .info-box h3 { color: #0072ce; margin-bottom: 15px; }
        .info-box ul { list-style: none; color: #2d3748; }
        .info-box li { margin: 10px 0; padding-left: 25px; position: relative; }
        .info-box li::before { content: "‚Ä¢"; color: #000000; font-weight: bold; position: absolute; left: 0; }
        .btn { width: 100%; padding: 18px; border: none; border-radius: 12px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: all 0.3s; margin: 10px 0; }
        .btn-primary { background: linear-gradient(135deg, #0072ce 0%, #000000 100%); color: white; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 10px 20px rgba(0, 114, 206, 0.4); }
        .btn-success { background: linear-gradient(135deg, #48bb78 0%, #38a169 100%); color: white; }
        .btn:disabled { background: #cbd5e0; cursor: not-allowed; }
        .progress-bar { width: 100%; height: 12px; background: #e2e8f0; border-radius: 10px; overflow: hidden; margin: 10px 0; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #0072ce 0%, #000000 100%); transition: width 0.3s; }
        .progress-info { display: flex; justify-content: space-between; color: #718096; font-size: 0.9em; }
        .question-box { background: #e6f2ff; border-radius: 12px; padding: 30px; margin: 20px 0; }
        .question-text { color: #2d3748; font-size: 1.3em; font-weight: 500; }
        input[type="text"] { width: 100%; padding: 18px; border: 2px solid #cbd5e0; border-radius: 12px; font-size: 1.1em; margin: 15px 0; }
        input[type="text"]:focus { outline: none; border-color: #0072ce; }
        .feedback { border-radius: 12px; padding: 25px; margin: 20px 0; display: flex; align-items: center; }
        .feedback-correct { background: #c6f6d5; color: #22543d; }
        .feedback-wrong { background: #fed7d7; color: #742a2a; }
        .feedback-icon { font-size: 2em; margin-right: 15px; }
        .feedback-text { font-size: 1.2em; font-weight: 600; }
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 25px 0; }
        .stat-card { background: white; border-radius: 12px; padding: 25px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .stat-label { color: #718096; font-size: 0.9em; margin-bottom: 10px; }
        .stat-value { font-size: 2.5em; font-weight: bold; }
        .result-card { background: linear-gradient(135deg, #e6f2ff 0%, #f0f0f0 100%); border-radius: 15px; padding: 30px; text-align: center; margin: 25px 0; }
        .score-big { font-size: 4em; font-weight: bold; margin: 15px 0; }
        .icon { width: 80px; height: 80px; margin: 20px auto; background: linear-gradient(135deg, #0072ce 0%, #000000 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2.5em; }
        .overall-stats { background: #f7fafc; border-radius: 12px; padding: 15px; text-align: center; margin-top: 20px; color: #718096; font-size: 0.9em; }
    </style>
</head>
<body>
    <div id="homeScreen" class="container">
        <h1>üá™üá™ Estonian Test System</h1>
        <p class="subtitle">Comprehensive Learning + Various Question Types + General Review</p>
        <div class="info-box">
            <h3>How it works:</h3>
            <ul><li>Complete all 25 lessons in order</li><li>Each lesson has multiple question types</li><li>General review after each lesson</li><li>Track your progress across all lessons</li></ul>
        </div>
        <button class="btn btn-primary" onclick="startFirstLesson()">Start Test - Begin with Lesson 1</button>
    </div>
    <div id="testScreen" class="container hidden">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;"><h2 id="lessonTitle"></h2><span id="lessonProgress" style="color: #718096;"></span></div>
        <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
        <div class="progress-info"><span id="questionNumber"></span><span id="currentScore"></span></div>
        <div class="question-box"><div class="question-text" id="questionText"></div></div>
        <div id="answerSection">
            <input type="text" id="answerInput" placeholder="Type your answer..." onkeypress="handleEnter(event)">
            <button class="btn btn-primary" onclick="checkAnswer()">Submit Answer</button>
        </div>
        <div id="feedbackSection" class="hidden">
            <div id="feedbackBox" class="feedback"><div class="feedback-icon" id="feedbackIcon"></div><div><div class="feedback-text" id="feedbackText"></div><div id="correctAnswer" style="margin-top: 10px;"></div></div></div>
            <button class="btn btn-success" onclick="nextQuestion()">Next Question ‚Üí</button>
        </div>
        <div class="overall-stats"><span id="overallProgress"></span></div>
    </div>
    <div id="lessonCompleteScreen" class="container hidden">
        <div class="icon">üèÜ</div><h1>Main Questions Complete!</h1>
        <div class="result-card"><div class="stat-label">Score</div><div class="score-big" id="mainScore"></div><div id="mainPercentage" style="font-size: 2em; font-weight: bold; margin-top: 10px;"></div></div>
        <p style="text-align: center; font-size: 1.2em; color: #4a5568; margin: 25px 0;">Now it's time for the General Review!</p>
        <button class="btn btn-primary" onclick="startReview()">Start General Review</button>
    </div>
    <div id="reviewCompleteScreen" class="container hidden">
        <div class="icon">üéâ</div><h1>Lesson Complete!</h1><h2 id="completedLessonName" style="text-align: center; color: #718096;"></h2>
        <div class="result-card">
            <div class="stats-grid"><div class="stat-card"><div class="stat-label">Main Questions</div><div class="stat-value" id="mainQScore" style="color: #0072ce;"></div></div><div class="stat-card"><div class="stat-label">General Review</div><div class="stat-value" id="reviewScore" style="color: #000000;"></div></div></div>
            <div class="stat-card" style="margin-top: 20px;"><div class="stat-label">Total Score</div><div class="stat-value" id="totalScore"></div><div id="totalPercentage" style="font-size: 2em; font-weight: bold; margin-top: 10px;"></div><div id="performanceMessage" style="font-size: 1.2em; font-weight: 600; margin-top: 10px;"></div></div>
        </div>
        <button class="btn btn-primary" onclick="continueToNext()"><span id="continueButtonText"></span> ‚Üí</button>
        <div style="text-align: center; color: #718096; margin-top: 15px;"><span id="lessonsCompleted"></span></div>
    </div>
    <div id="finalScreen" class="container hidden">
        <div style="font-size: 4em; margin-bottom: 20px; text-align: center;">üéä</div><h1 style="text-align: center;">ALL LESSONS COMPLETED!</h1><h2 style="text-align: center; color: #0072ce;">FINAL RESULTS</h2>
        <div class="result-card">
            <div style="margin-bottom: 30px;"><div class="stat-label">Total Lessons</div><div style="font-size: 3em; font-weight: bold;" id="totalLessons"></div></div>
            <div style="margin-bottom: 30px;"><div class="stat-label">Total Score</div><div style="font-size: 4em; font-weight: bold; color: #0072ce;" id="finalScore"></div></div>
            <div class="stat-card"><div class="stat-label">Success Rate</div><div class="score-big" id="finalPercentage"></div><div id="finalMessage" style="font-size: 1.5em; font-weight: bold; margin-top: 15px;"></div></div>
        </div>
        <p style="text-align: center; font-size: 1.3em; color: #48bb78; font-weight: 600; margin: 25px 0;">Congratulations!</p>
        <button class="btn btn-primary" onclick="goHome()">üè† Back to Home</button>
    </div>
    <script>
        function normalizeText(text) { return text.toLowerCase().trim().normalize('NFD').replace(/[\u0300-\u036f]/g, ''); }
        const lessonsData = {"Lesson 1 - Numbers 1-10":{count:10,words:[["1","uks"],["2","kaks"],["3","kolm"],["4","neli"],["5","viis"],["6","kuus"],["7","seitse"],["8","kaheksa"],["9","uheksa"],["10","kumme"]],isNumbers:true},"Lesson 2 - Greetings":{count:18,words:[["Hello","tere"],["How are you?","kuidas sul laheb"],["Nice to see you","tore sind naha"],["Nice to meet you","meeldiv tutvuda"],["See you tomorrow","naeme homme"],["Good morning","tere hommikust"],["Good afternoon","tere paevast"],["Good evening","tere ohtust"],["Good night","head ood"],["What is your name?","mis si nimi on"],["My name is","minu nimi on"],["Where do you live?","kus sa elad"],["Where are you from?","kust sa parit oled"],["Have a nice day","kena paeva"],["See you later","naeme hiljem"],["Goodbye","head aega"],["Please","palun"],["Thank you","aitah"]],isNumbers:false},"Lesson 3 - Regular Verbs":{count:45,words:[["to withdraw/shrink","tombuma"],["to say/tell","utlema"],["to do/make","tegema"],["to think","motlema"],["to present","esitlema"],["to call (on phone)","helistama"],["to ask","kusima"],["to seem","tunduma"],["to leave (behind)","jatma"],["to begin/start","alustama"],["to hallucinate","viirastuma"],["to help","aitama"],["to let play","mangitama"],["to run","jooksma"],["to move (house)","kolima"],["to believe","uskuma"],["to write","kirjutama"],["to pose","poseerima"],["to rumble","porama"],["to continue","jatkuma"],["to set/place","seadma"],["to study/learn","oppima"],["to exchange","vahetama"],["to tolerate","talutama"],["to observe","jalgima"],["to stand (cause)","seisatama"],["to speak/talk","raakima"],["to spend (time)","veetma"],["to teach","opetama"],["to weigh/consider","kaalutlema"],["to appear","ilmuma"],["to buy","ostma"],["to serve","servima"],["to send (official)","lakitama"],["to build","ehitama"],["to fumble","pusima"],["to cut","loikama"],["to sell","muuma"],["to return","tagastama"],["to explain","seletama"],["to develop","arenema"],["to keep/hold","hoidma"],["to produce","tootma"],["to use/consume","tarvitama"],["to bind/cover","kaanetama"]],isNumbers:false},"Lesson 4 - Adjectives":{count:35,words:[["Happy","onnelik"],["Sad","kurb"],["Angry","vihane"],["Afraid","kartlik"],["Joy","roomus"],["Surprised","ullatunud"],["Calm","rahulik"],["Bored","igav"],["Easy","lihtne"],["Difficult","raske"],["Bad","halb"],["Good","hea"],["Noisy","larmakas"],["Quiet","vaikne"],["Strong","tugev"],["Weak","nork"],["Hard","kova"],["Soft","pehme"],["More","rohkem"],["Less","vahem"],["Clean","puhas"],["Dirty","must"],["Old","vana"],["New","uus"],["Big","suur"],["Small","vaike"],["Young","noor"],["Skinny","kohn"],["Fat","paks"],["Pretty","ilus"],["Ugly","inetu"],["Thick","paks"],["Thin","ohuke"],["Rough","kare"],["Smooth","sile"]],isNumbers:false},"Lesson 5.1 - Days":{count:11,words:[["The days of the week","nadalapaevad"],["Day","paev"],["Week","nadal"],["Monday","esmispaev"],["Tuesday","teisipaev"],["Wednesday","kolmapaev"],["Thursday","neljapaev"],["Friday","reede"],["Saturday","laupaev"],["Sunday","puhapaev"],["Weekend","nadalavahetus"]],isNumbers:false},"Lesson 5.2 - Months":{count:15,words:[["The months of the year","kalendrikuud"],["Month","kuu"],["Year","aasta"],["January","jaanuar"],["February","veebruar"],["March","marts"],["April","aprill"],["May","mai"],["June","juuni"],["July","juuli"],["August","august"],["September","september"],["October","oktoober"],["November","november"],["December","detsember"]],isNumbers:false},"Lesson 6 - Seasons & Weather":{count:23,words:[["Seasons","aastaajad"],["Winter","talv"],["Summer","suvi"],["Spring","kevad"],["Autumn","sugis"],["Sky","taevas"],["Cloud","pilv"],["Rainbow","vikerkaar"],["Cold","kulm"],["Hot","palav"],["It is hot","on palav"],["It is cold","on kulm"],["It is sunny","on paikesepaisteline"],["It is cloudy","on pilvine"],["It is humid","on niiske"],["It is raining","vihma sajab"],["It is snowing","lund sajab"],["It is windy","on tuuline"],["How is the weather?","mis ilm on"],["Good weather","hea ilm"],["Bad weather","halb ilm"],["What is the temperature?","milline temperatuur valjas on"],["It is 24 degrees","on 24 kraadi"]],isNumbers:false},"Lesson 7 - Colors":{count:14,words:[["Black","must"],["Blue","sinine"],["Brown","pruun"],["Green","roheline"],["Orange","oranz"],["Purple","lilla"],["Red","punane"],["White","valge"],["Yellow","kollane"],["Gray","hall"],["Gold","kuldne"],["Silver","hobedane"],["What color is it?","mis varvi see on"],["The color is","varv on"]],isNumbers:false},"Lesson 8.1 - Family":{count:35,words:[["Mother","ema"],["Father","isa"],["Brother","vend"],["Sister","ode"],["Son","poeg"],["Daughter","tutar"],["Parents","vanemad"],["Children","lapsed"],["Child","laps"],["Stepmother","kasuema"],["Stepfather","kasuisa"],["Stepsister","poolode"],["Stepbrother","poolvend"],["Son-in-law","vaimees"],["Daughter-in-law","minia"],["Wife","naine"],["Husband","mees"],["Grandparents","vanavanemad"],["Grandfather","vanaisa"],["Grandmother","vanaema"],["Grandson","lapselaps"],["Granddaughter","lapselaps"],["Grandchildren","lapselapsed"],["Grandchild","lapselaps"],["Aunt","tadi"],["Uncle","onu"],["Cousin (female)","onututar/taditutar"],["Cousin (male)","onupoeg/tadipoeg"],["Nephew","vennapoeg"],["Niece","vennatutar"],["Father-in-law","ai"],["Mother-in-law","amm"],["Brother-in-law","mehevend/naisevend"],["Sister-in-law","meheode/naiseode"],["Relative","sugulane"]],isNumbers:false},"Lesson 8.2 - Friends":{count:14,words:[["Miss","prl"],["Boy","poiss"],["Girl","tudruk"],["Baby","beebi"],["Woman","naine"],["Man","mees"],["Friend (male)","sober"],["Friend (female)","sobranna"],["Boyfriend","poiss-sober"],["Girlfriend","tudruksober"],["Gentleman","harrasmees"],["Lady","daam"],["Neighbor (male)","naaber"],["Neighbor (female)","naaber"]],isNumbers:false},"Lesson 9 - Numbers 11-30":{count:20,words:[["11","uksteist"],["12","kaksteist"],["13","kolmteist"],["14","neliteist"],["15","viisteist"],["16","kuusteist"],["17","seitseteist"],["18","kaheksateist"],["19","uheksateist"],["20","kaksk√ºmmend"],["21","kaksk√ºmmend uks"],["22","kaksk√ºmmend kaks"],["23","kaksk√ºmmend kolm"],["24","kaksk√ºmmend neli"],["25","kaksk√ºmmend viis"],["26","kaksk√ºmmend kuus"],["27","kaksk√ºmmend seitse"],["28","kaksk√ºmmend kaheksa"],["29","kaksk√ºmmend uheksa"],["30","kolmk√ºmmend"]],isNumbers:true},"Lesson 10.1 - Prepositions":{count:36,words:[["For","jaoks"],["From","alates"],["In","sisse/sees"],["Inside","sees"],["Into","sisse"],["Near","lahedal"],["Of","millest"],["Out","valja"],["Outside","valjas"],["Under","all"],["With","koos"],["Without","ilma"],["Above","ulalpool"],["Across","ule"],["After","parast"],["Against","vastu"],["Along","mooda"],["Around","umber"],["At","juures"],["Behind","taga"],["Below","allpool"],["Beside","korval"],["Between","vahel"],["By","korval"],["During","ajal"],["Except","valja arvatud"],["And","ja"],["Because","sest"],["But","aga"],["Or","voi"],["Everywhere","igal pool"],["Everyone","igauks"],["Everything","koik"],["Few","vahe"],["Some","moni"],["Many","palju"]],isNumbers:false},"Lesson 10.2 - Useful Words":{count:29,words:[["Question","kusimus"],["Answer","vastus"],["Truth","tode"],["Lie","vale"],["Nothing","mitte midagi"],["Something","midagi"],["Same","sama"],["Different","erinev"],["Pull","tomba"],["Push","lukka"],["Long","pikk"],["Short","luhike"],["Cold","kulm"],["Hot","kuum"],["Light","hele"],["Dark","tume"],["Wet","marg"],["Dry","kuiv"],["Empty","tuhi"],["Full","tais"],["How?","kuidas"],["What?","mida"],["When?","millal"],["Where?","kuhu"],["Which?","milline"],["Who?","kes"],["Why?","miks"],["How long?","kui kaua"],["How much?","kui palju"]],isNumbers:false},"Lesson 11.1 - Drinks":{count:9,words:[["Coffee","kohv"],["Tea","tee"],["Soft drink","karastusjook"],["Water","vesi"],["Lemonade","limonaad"],["Juice","mahl"],["Orange juice","apelsinimahl"],["I would like a glass of water please","palun mulle klaas vett"],["With ice","jaaga"]],isNumbers:false},"Lesson 11.2 - Dairy Products":{count:19,words:[["Milk","piim"],["Ice cream","jaatis"],["Butter","voi"],["Cheese","juust"],["Cottage cheese","kodujuust"],["Cream","koor"],["Sour cream","hapukoor"],["Yogurt","jogurt"],["Eggs","munad"],["Whipping cream","vahukoor"],["Bakery","pagaritooted"],["Baguette","pikk sai"],["Doughnut","soorik"],["Cookie","kupsis"],["Roll","kukkel"],["Dessert","magustoit"],["Cake","kook"],["Bread","leib"],["Pie","pirukas"]],isNumbers:false},"Lesson 11.3 - Meats":{count:13,words:[["Beef","veiseliha"],["Veal","vasikaliha"],["Ham","sink"],["Chicken","kanaliha"],["Turkey","kalkun"],["Duck","part"],["Bacon","peekon"],["Pork","sealiha"],["Filet mignon","sisefilee"],["Sausage","vorst"],["Lamb chop","tallekarree"],["Pork chop","seakarbonaad"],["Meat","liha"]],isNumbers:false},"Lesson 11.4 - Seafoods":{count:20,words:[["Fish","kala"],["Shellfish","koorikloomad"],["Bass","ahven"],["Salmon","lohe"],["Lobster","vahk"],["Crab","krabi"],["Mussel","rannakarp"],["Oyster","auster"],["Cod","tursk"],["Clam","merikarp"],["Shrimp","krevett"],["Tuna","tuun"],["Trout","forell"],["Sole","lest"],["Shark","hai"],["Carp","karpkala"],["Tilapia","tilapia"],["Eel","angerjas"],["Catfish","saga"],["Swordfish","mookkala"]],isNumbers:false},"Lesson 11.5 - Herbs & Spices":{count:17,words:[["Salt","sool"],["Pepper","pipar"],["Caraway","koomen"],["Garlic","kuuslauk"],["Basil","basiilik"],["Coriander","koriander"],["Fennel","apteegitill"],["Marjoram","majoraan"],["Oregano","oregano"],["Parsley","petersell"],["Rosemary","rosmariin"],["Sage","salvei"],["Thyme","tuumian"],["Nutmeg","muskaatpahkel"],["Paprika","paprika"],["Cayenne","cayenne"],["Ginger","ingver"]],isNumbers:false},"Lesson 11.6 - Vegetables":{count:28,words:[["Celery","seller"],["Eggplant","bakla≈æaan"],["Zucchini","suvikorvits"],["Onion","sibul"],["Spinach","spinat"],["Salad","salat"],["Green beans","rohelised oad"],["Cucumber","kurk"],["Radish","redis"],["Cabbage","kapsas"],["Mushrooms","seened"],["Lettuce","lehtsalat"],["Corn","mais"],["Potatoes","kartul"],["Tomato","tomat"],["Carrot","porgand"],["Plantain","jahubanaanid"],["Beans","oad"],["Leek","porrulauk"],["Lotus root","lootosejuur"],["Bamboo shoot","bambusevorsed"],["Artichoke","artisokk"],["Asparagus","spargel"],["Brussels sprouts","rooskapsas"],["Broccoli","brokkoli"],["Peas","herned"],["Cauliflower","lillkapsas"],["Chili pepper","tsillipipar"]],isNumbers:false},"Lesson 11.7 - Fruits":{count:27,words:[["Cherries","kirsid"],["Raspberries","vaarikad"],["Blueberries","mustikad"],["Strawberries","maasikad"],["Lemon","sidrun"],["Lime","laim"],["Apple","oun"],["Orange","apelsin"],["Pear","pirn"],["Banana","banaan"],["Grapes","viinamarjad"],["Grapefruit","greip"],["Watermelon","arbuus"],["Pineapple","ananass"],["Plum","ploom"],["Peach","virsik"],["Mango","mango"],["Apricot","aprikoos"],["Pomegranate","granaato√ºn"],["Persimmon","hurmaa"],["Kiwi","kiivi"],["Litchi","litsi"],["Longan","longan"],["Balsam pear","karella-kibekurk"],["Passion fruit","granadill"],["Avocado","avokaado"],["Coconut","kookospahkel"]],isNumbers:false},"Lesson 12 - Irregular Verbs":{count:52,words:[["to be","olema"],["to have","omama"],["to go","minema"],["to come","tulema"],["to do/make","tegema"],["to put","panema"],["to take","votma"],["to drive","soitma"],["to stay","jaama"],["to see","nagema"],["to eat","sooma"],["to drink","jooma"],["to say","utlema"],["to give","andma"],["to get/become","saama"],["to bring","tooma"],["to carry","viima"],["to find","leidma"],["to wash","pesema"],["to read","lugema"],["to sleep","magama"],["to close","sulgema"],["to wear/carry","kandma"],["to stand","seisma"],["to sit","istuma"],["to run","jooksma"],["to die","surema"],["to wake up","arkama"],["to learn","oppima"],["to live","elama"],["to love","armastama"],["to believe","uskuma"],["to hear","kuulma"],["to feel/know","tundma"],["to melt","sulatama"],["to rise","tousma"],["to lose","kaotama"],["to fight","voitlema"],["to search","otsima"],["to start","alustama"],["to cover","katma"],["to sing","laulma"],["to forget","unustama"],["to forgive","andeks andma"],["to create","looma"],["can/may","voima"],["to escape","pogenema"],["to send","saatma"],["to fall","langema"],["to decide","otsustama"],["to open","avama"],["to play","mangima"]],isNumbers:false},"Lesson 14 - Numbers 31-50":{count:20,words:[["31","kolmk√ºmmend uks"],["32","kolmk√ºmmend kaks"],["33","kolmk√ºmmend kolm"],["34","kolmk√ºmmend neli"],["35","kolmk√ºmmend viis"],["36","kolmk√ºmmend kuus"],["37","kolmk√ºmmend seitse"],["38","kolmk√ºmmend kaheksa"],["39","kolmk√ºmmend uheksa"],["40","nelik√ºmmend"],["41","nelik√ºmmend uks"],["42","nelik√ºmmend kaks"],["43","nelik√ºmmend kolm"],["44","nelik√ºmmend neli"],["45","nelik√ºmmend viis"],["46","nelik√ºmmend kuus"],["47","nelik√ºmmend seitse"],["48","nelik√ºmmend kaheksa"],["49","nelik√ºmmend uheksa"],["50","viisk√ºmmend"]],isNumbers:true},"Lesson 15 - Physical Appearance":{count:38,words:[["Tall","pikk"],["Short (height)","luhike"],["Slim","sale"],["Fat","paks"],["Muscular","lihaseline"],["Blonde","blond"],["Brown-haired","pruunide juustega"],["Black-haired","mustade juustega"],["Curly hair","lokkis juuksed"],["Straight hair","sirged juuksed"],["Blue eyes","sinised silmad"],["Brown eyes","pruunid silmad"],["Green eyes","rohelised silmad"],["Beautiful","ilus"],["Handsome","nagus"],["Ugly","kole"],["Young","noor"],["Old","vana"],["Beard","habe"],["Light-skinned","hele nahk"],["Dark-skinned","tume nahk"],["Freckles","tedretahnid"],["Wrinkles","kortsud"],["Bald","kiilakas"],["Hairy (body)","karvane"],["Straight nose","sirge nina"],["Big nose","suur nina"],["Small nose","vaike nina"],["Thin lips","ohukesed huuled"],["Full lips","taidlased huuled"],["Broad shoulders","laiad olad"],["Narrow shoulders","kitsad olad"],["Tanned skin","paevitunud nahk"],["Pale skin","kahvatu nahk"],["Wavy hair","lainelised juuksed"],["Ponytail","hobusesaba"],["Braids","patsid"],["Beard and mustache","habe ja vuntsid"]],isNumbers:false},"Lesson 16 - Occupations":{count:25,words:[["Doctor","arst"],["Teacher","opetaja"],["Engineer","insener"],["Lawyer","jurist"],["Salesperson","muuja"],["Police officer","politseinik"],["Firefighter","tuletorjuja"],["Programmer","programmeerija"],["Cook/Chef","kokk"],["Journalist","ajakirjanik"],["Nurse","ode"],["Architect","arhitekt"],["Accountant","raamatupidaja"],["Pharmacist","apteeker"],["Driver","autojuht"],["Mechanic","mehaanik"],["Scientist","teadlane"],["Dentist","hambaarst"],["Musician","muusik"],["Actor","naitleja"],["Artist","kunstnik"],["Pilot","piloot"],["Farmer","talunik"],["Photographer","fotograaf"],["Waiter/Waitress","ettekandja"]],isNumbers:false},"Lesson 17 - Sports":{count:30,words:[["Football/Soccer","jalgpall"],["Basketball","korvpall"],["Volleyball","vorkpall"],["Tennis","tennis"],["Swimming","ujumine"],["Running/Athletics","jooksmine/kergejoustik"],["Ice hockey","jaahoki"],["Skiing","suusatamine"],["Cycling","jalgrattasoit"],["Boxing","poks"],["Martial arts","voitluskunst"],["Golf","golf"],["Table tennis","lauatennis"],["Wrestling","maadlus"],["Handball","kasipall"],["Baseball","pesapall"],["Surfing","lainelauasoit"],["Skating","uisutamine"],["Horse riding","ratsutamine"],["Diving","sukeldumine"],["Cricket","kriket"],["Rugby","ragbi"],["Ballet","ballett"],["Bowling","keegel"],["Weightlifting","tostmine"],["Windsurfing","purjelauasoit"],["Ice skating","uisutamine"],["Rowing","soudmine"],["Archery","vibulaskmine"],["Climbing","ronimine"]],isNumbers:false},"Lesson 18 - Numbers 51-75":{count:25,words:[["51","viisk√ºmmend uks"],["52","viisk√ºmmend kaks"],["53","viisk√ºmmend kolm"],["54","viisk√ºmmend neli"],["55","viisk√ºmmend viis"],["56","viisk√ºmmend kuus"],["57","viisk√ºmmend seitse"],["58","viisk√ºmmend kaheksa"],["59","viisk√ºmmend uheksa"],["60","kuusk√ºmmend"],["61","kuusk√ºmmend uks"],["62","kuusk√ºmmend kaks"],["63","kuusk√ºmmend kolm"],["64","kuusk√ºmmend neli"],["65","kuusk√ºmmend viis"],["66","kuusk√ºmmend kuus"],["67","kuusk√ºmmend seitse"],["68","kuusk√ºmmend kaheksa"],["69","kuusk√ºmmend uheksa"],["70","seitsek√ºmmend"],["71","seitsek√ºmmend uks"],["72","seitsek√ºmmend kaks"],["73","seitsek√ºmmend kolm"],["74","seitsek√ºmmend neli"],["75","seitsek√ºmmend viis"]],isNumbers:true},"Lesson 19 - Clothing":{count:42,words:[["Shirt","sark"],["T-shirt","t-sark"],["Blouse","pluus"],["Sweater","kampsun"],["Jacket","jakk"],["Coat","mantel"],["Dress","kleit"],["Skirt","seelik"],["Pants","puksid"],["Shorts","luhikesed puksid"],["Shoes","kingad"],["Boots","saapad"],["Sneakers","tossud"],["Sandals","sandaalid"],["Hat/Cap","muts"],["Scarf","sall"],["Gloves","kindad"],["Belt","voo"],["Socks","sokid"],["Winter coat","talvemantel"],["Wool hat","villane muts"],["Snow boots","lumesaapad"],["Swimsuit","ujumisriided"],["Sunglasses","paikeseprillid"],["Flip-flops","platud"],["Tank top","top"],["Suit","ulikond"],["Tie","lips"],["Blazer","bleiser"],["High heels","kontsaga kingad"],["Evening dress","ohtukleit"],["Black","must"],["White","valge"],["Red","punane"],["Blue","sinine"],["Green","roheline"],["Cotton","puuvill"],["Wool","vill"],["Leather","nahk"],["Silk","siid"],["Linen","linane"]],isNumbers:false},"Lesson 20 - Adverbs":{count:20,words:[["Quickly","kiiresti"],["Slowly","aeglaselt"],["Always","alati"],["Never","mitte kunagi"],["Often","sageli"],["Sometimes","monikord"],["Rarely","harva"],["Already","juba"],["Still","ikka"],["Yet","veel"],["Soon","varsti"],["Now","nuud"],["Later","hiljem"],["Today","tana"],["Tomorrow","homme"],["Yesterday","eile"],["Clearly","selgelt"],["Together","koos"],["Apart","lahku"],["Forever","igavesti"]],isNumbers:false},"Lesson 21 - Animals":{count:20,words:[["Dog","koer"],["Cat","kass"],["Horse","hobune"],["Cow","lehm"],["Sheep","lammas"],["Pig","siga"],["Goat","kits"],["Chicken","kana"],["Duck","part"],["Bird","lind"],["Rabbit","janes"],["Mouse","hiir"],["Lion","lovi"],["Tiger","tiiger"],["Bear","karu"],["Elephant","elevant"],["Monkey","ahv"],["Fox","rebane"],["Wolf","hunt"],["Deer","hirv"]],isNumbers:false},"Lesson 23 - Places in Town":{count:20,words:[["School","kool"],["Hospital","haigla"],["Bank","pank"],["Restaurant","restoran"],["Library","raamatukogu"],["Supermarket","supermarket"],["Cinema","kino"],["Post office","postkontor"],["Police station","politseijaoskond"],["Park","park"],["Museum","muuseum"],["Theatre","teater"],["Hotel","hotell"],["Stadium","staadion"],["Church","kirik"],["Pharmacy","apteek"],["Bakery","pagari√§ri"],["Butcher","lihunik"],["Market","turg"],["Hairdresser","juuksur"]],isNumbers:false},"Lesson 24 - School Supplies":{count:20,words:[["Book","raamat"],["Pen","pliiats"],["Pencil","harilik pliiats"],["Eraser","kustutuskumm"],["Notebook","markmik"],["Ruler","joonlaud"],["Scissors","kaarid"],["Backpack","seljakott"],["Folder","kaust"],["Calculator","kalkulaator"],["Marker","marker"],["Chalk","kriit"],["Map","kaart"],["Highlighter","marker"],["Projector","projektor"],["Laptop","sulearvuti"],["Printer","printer"],["USB stick","usb-malupulk"],["Schoolbag","koolikott"],["Sharpener","teritaja"]],isNumbers:false},"Lesson 25 - Transportation":{count:20,words:[["Car","auto"],["Bus","buss"],["Train","rong"],["Bicycle","jalgratas"],["Motorcycle","mootorratas"],["Airplane","lennuk"],["Boat","paat"],["Tram","tramm"],["Taxi","takso"],["Subway","metroo"],["Ferry","parvlaev"],["Yacht","jaht"],["Hot air balloon","kuumaohupall"],["Spaceship","kosmoselaev"],["Rickshaw","riksa"],["Gondola","gondel"],["Zeppelin","tsepeliin"],["Rollerblades","rulluisud"],["Canoe","kanuu"],["Submarine","allveelaev"]],isNumbers:false}};
        let state = {lessonNames:Object.keys(lessonsData),currentLessonIndex:0,currentLesson:null,questions:[],currentQ:0,score:{correct:0,total:0},mainQuestionsCorrect:0,isReview:false,allLessonsScore:{correct:0,total:0},completedLessons:0};
        function generateQuestions(words,count,isNumbers){const q=[];if(isNumbers){words.forEach(([e,est])=>{q.push({question:`What is '${e}' in Estonian? (Answer with the WORD)`,answer:est,displayAnswer:est});});words.forEach(([e,est])=>{q.push({question:`What number is '${est}'? (Answer with the NUMBER)`,answer:e,displayAnswer:e});});}else if(count<=20){words.forEach(([e,est])=>q.push({question:`Translate to Estonian: '${e}'`,answer:est,displayAnswer:est}));words.forEach(([e,est])=>q.push({question:`Translate to English: '${est}'`,answer:e,displayAnswer:e}));words.forEach(([e,est])=>{const f=est[0]||"";const b="_".repeat(est.length-1);q.push({question:`'${e}' = '${f}${b}' - Complete the Estonian word`,answer:est,displayAnswer:est});});}else{const t=Math.floor(words.length/3);words.slice(0,t).forEach(([e,est])=>q.push({question:`Translate to Estonian: '${e}'`,answer:est,displayAnswer:est}));words.slice(t,t*2).forEach(([e,est])=>q.push({question:`Translate to English: '${est}'`,answer:e,displayAnswer:e}));words.slice(t*2).forEach(([e,est])=>{const f=est[0]||"";const b="_".repeat(est.length-1);q.push({question:`'${e}' = '${f}${b}'`,answer:est,displayAnswer:est});});}return q.sort(()=>Math.random()-0.5);}
        function generateReview(words,isNumbers){const size=Math.min(20,words.length);const sampled=[...words].sort(()=>Math.random()-0.5).slice(0,size);return sampled.map(([e,est])=>{if(isNumbers){return Math.random()>0.5?{question:`[GENERAL REVIEW] '${e}' in Estonian?`,answer:est,displayAnswer:est}:{question:`[GENERAL REVIEW] What number is '${est}'?`,answer:e,displayAnswer:e};}else{return Math.random()>0.5?{question:`[GENERAL REVIEW] Translate: '${e}'`,answer:est,displayAnswer:est}:{question:`[GENERAL REVIEW] Translate: '${est}'`,answer:e,displayAnswer:e};}});}
        function showScreen(id){document.querySelectorAll('.container').forEach(e=>e.classList.add('hidden'));document.getElementById(id).classList.remove('hidden');}
        function startFirstLesson(){state.currentLessonIndex=0;startLesson(state.lessonNames[0]);}
        function startLesson(name){const l=lessonsData[name];state.currentLesson=name;state.questions=generateQuestions(l.words,l.count,l.isNumbers);state.currentQ=0;state.score={correct:0,total:0};state.mainQuestionsCorrect=0;state.isReview=false;updateTestScreen();showScreen('testScreen');}
        function updateTestScreen(){const q=state.questions[state.currentQ];const p=((state.currentQ+1)/state.questions.length)*100;document.getElementById('lessonTitle').textContent=state.isReview?'üîÑ GENERAL REVIEW':state.currentLesson;document.getElementById('lessonProgress').textContent=`Lesson ${state.completedLessons+1}/${state.lessonNames.length}`;document.getElementById('progressFill').style.width=p+'%';document.getElementById('questionNumber').textContent=`Question ${state.currentQ+1}/${state.questions.length}`;document.getElementById('currentScore').textContent=`Score: ${state.score.correct}/${state.score.total}`;document.getElementById('questionText').textContent=q.question;document.getElementById('overallProgress').textContent=`Overall Progress: ${state.allLessonsScore.correct}/${state.allLessonsScore.total} (${state.allLessonsScore.total>0?Math.round((state.allLessonsScore.correct/state.allLessonsScore.total)*100):0}%)`;document.getElementById('answerInput').value='';document.getElementById('answerInput').focus();document.getElementById('answerSection').classList.remove('hidden');document.getElementById('feedbackSection').classList.add('hidden');}
        function handleEnter(e){if(e.key==='Enter'&&document.getElementById('answerInput').value)checkAnswer();}
        function checkAnswer(){const a=document.getElementById('answerInput').value;if(!a)return;const q=state.questions[state.currentQ];const c=normalizeText(a)===normalizeText(q.answer);state.score.correct+=c?1:0;state.score.total+=1;state.allLessonsScore.correct+=c?1:0;state.allLessonsScore.total+=1;if(!state.isReview&&state.currentQ<state.questions.length){if(c)state.mainQuestionsCorrect++;}document.getElementById('feedbackBox').className=c?'feedback feedback-correct':'feedback feedback-wrong';document.getElementById('feedbackIcon').textContent=c?'‚úì':'‚úó';document.getElementById('feedbackText').textContent=c?'Correct!':'Wrong!';document.getElementById('correctAnswer').innerHTML=c?'':`Correct answer: <strong>${q.displayAnswer}</strong>`;document.getElementById('answerSection').classList.add('hidden');document.getElementById('feedbackSection').classList.remove('hidden');}
        function nextQuestion(){if(state.currentQ<state.questions.length-1){state.currentQ++;updateTestScreen();}else{if(!state.isReview){showLessonComplete();}else{state.completedLessons++;showReviewComplete();}}}
        function showLessonComplete(){const p=(state.mainQuestionsCorrect/state.questions.length)*100;document.getElementById('mainScore').textContent=`${state.mainQuestionsCorrect}/${state.questions.length}`;document.getElementById('mainPercentage').textContent=p.toFixed(1)+'%';showScreen('lessonCompleteScreen');}
        function startReview(){const l=lessonsData[state.currentLesson];state.questions=generateReview(l.words,l.isNumbers);state.currentQ=0;state.isReview=true;updateTestScreen();showScreen('testScreen');}
        function showReviewComplete(){const rc=state.score.correct-state.mainQuestionsCorrect;const tc=state.score.correct;const tq=state.score.total;const p=(tc/tq)*100;document.getElementById('completedLessonName').textContent=state.currentLesson;document.getElementById('mainQScore').textContent=state.mainQuestionsCorrect;document.getElementById('reviewScore').textContent=rc;document.getElementById('totalScore').textContent=`${tc}/${tq}`;document.getElementById('totalPercentage').textContent=p.toFixed(1)+'%';document.getElementById('totalPercentage').style.color=p>=90?'#10b981':p>=70?'#3b82f6':p>=50?'#eab308':'#ef4444';const m=p>=90?'üéâ Excellent!':p>=70?'üëè Very Good!':p>=50?'üëç Good!':'üìö Keep studying!';document.getElementById('performanceMessage').textContent=m;const last=state.currentLessonIndex===state.lessonNames.length-1;document.getElementById('continueButtonText').textContent=last?'View Final Results':`Continue to ${state.lessonNames[state.currentLessonIndex+1]}`;document.getElementById('lessonsCompleted').textContent=`Completed: ${state.completedLessons}/${state.lessonNames.length} lessons`;showScreen('reviewCompleteScreen');}
        function continueToNext(){state.currentLessonIndex++;if(state.currentLessonIndex<state.lessonNames.length){startLesson(state.lessonNames[state.currentLessonIndex]);}else{showFinalResults();}}
        function showFinalResults(){const p=(state.allLessonsScore.correct/state.allLessonsScore.total)*100;document.getElementById('totalLessons').textContent=state.lessonNames.length;document.getElementById('finalScore').textContent=`${state.allLessonsScore.correct}/${state.allLessonsScore.total}`;document.getElementById('finalPercentage').textContent=p.toFixed(1)+'%';document.getElementById('finalPercentage').style.color=p>=90?'#10b981':p>=70?'#3b82f6':p>=50?'#eab308':'#ef4444';const m=p>=90?'üéâüéâüéâ EXCELLENT! You\'re amazing at Estonian! üéâüéâüéâ':p>=70?'üëèüëèüëè VERY GOOD! Great performance! üëèüëèüëè':p>=50?'üëçüëç GOOD! Keep going! üëçüëç':'üìöüìö Keep studying! You can do it! üìöüìö';document.getElementById('finalMessage').textContent=m;showScreen('finalScreen');}
        function goHome(){state={lessonNames:Object.keys(lessonsData),currentLessonIndex:0,currentLesson:null,questions:[],currentQ:0,score:{correct:0,total:0},mainQuestionsCorrect:0,isReview:false,allLessonsScore:{correct:0,total:0},completedLessons:0};showScreen('homeScreen');}
    </script>
</body>
</html>